<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${tournament.nickName}"></title>
    <div th:replace="fragments :: includes (description='Round ' + ${tournament.round} + ' Scoreboard for '
        + ${tournament.nickName})"></div>
</head>
<body>
    <div class="content">
        <h1 th:text="${tournament.nickName}"></h1>
        Round:<span class="wide-padded" th:text="${tournament.round}"></span>
        <a class="wide-padded" th:href="${tournament.pairingsUrl}" target="_blank">Pairings</a>
        <a class="wide-padded" th:href="${tournament.standingsUrl}" target="_blank">Full Standings</a>
        <a class="wide-padded" th:href="${tournament.decklistUrl}" target="_blank">All Decklists</a>
        <hr>

        <div class="left bordered">
            <h3>Records</h3>
            <ul>
                <th:block th:each="recordCount : ${tournament.standings.getRecordCounts(4)}">
                    <li th:text="${recordCount.record} + ': ' + ${recordCount.count} + ' Players'"></li>
                </th:block>
            </ul>
        </div>

        <div class="left small-padded">
            <h2 class="title">Players</h2>

            <table class="player-table" th:with="players=${tournament.playersToWatch}">
                <thead><tr>
                    <th>Record</th>
                    <th>Player</th>
                    <th>Deck</th>
                    <th>Opponent</th>
                    <th>Opponent's Deck</th>
                </tr></thead>
                <th:block th:each="ps, stat : ${players}">
                    <tr th:with="pad=${!stat.first
                            && ps.record.compareTo(players.get(stat.index-1).record)<0} ? 'pad-top'">
                        <td th:text="${ps.record}" th:classappend="${pad}"></td>
                        <td th:text="${ps.player.realName}"  th:classappend="${pad}"></td>
                        <td th:classappend="${pad}">
                            <a th:href="${ps.decklist.url}" th:text="${ps.decklist.name}" target="_blank"></a>
                        </td>
                        <td th:text="${ps.opponent.realName}"  th:classappend="${pad}"></td>
                        <td th:classappend="${pad}">
                            <a th:href="${ps.opponentsDecklist.url}" th:text="${ps.opponentsDecklist.name}"
                               target="_blank"></a>
                        </td>
                    </tr>
                </th:block>
            </table>
        </div>
    </div>
    <div th:include="fragments :: footer"/>
</body>
</html>